---
title: ICBM 캡스톤디자인
categories: [project]
comments: true
---

# (추가) 5월 4일 개발 중 문제점

센서 값을 웹 페이지에 뿌려주기 위해 통신 방식을 
python -> mysql -> php 로 생각하고 개발을 해왔다.  -> 모듈값을 php에 뿌려주기는 (성공)

그리고 센서값에 따라서 모듈(LED, 냉각기, 열선패드, 환풍기)을 사용자가 입력한 환경에 따라 자동으로 동작 시키기 위해서
센서값을 불러오는 php에서 python 코드를 실행(exec 명령어를 통해)시켜 모듈을 동작하게끔 하려고 진행했다.

여기서 센서.php가 계속 리프레쉬를 해줘야 하면서 문제점이 많이 발생되었는데

  1. php는 파이썬 while문이 돌면 리프레쉬가 안된다.
  2. python에 sleep으로 대기하는 구문이 있으면 리프레쉬가 되는 속도에 계속 영향을 받는다.
  3. 리프레쉬 자체는 코드가 계속 실행되는 것이아닌 코드 자체가 한 번 돌기 때문에 생각한 로직대로 움직이지 않는다.




  -------------------------------------
  
  
  
  ```
  ex) (정확한 구문이 아님)
  $i=1;
  (while)
    if($i==1){
      $i=0;
    }elseif($i==0){
      break;
    }
  }
  ```
  
  
  
  
  echo $i;
  를 하였다 쳐보자 그럼 i가 0으로 출력이 되긴 하지만 리프레쉬를 하면
  코드가 다시 돌면서 i가 1로 다시 됐다가 0으로 출력이 된다.
  즉 i=0이 수행되어서 i가 0으로 되었다고 착각하게 되는 것이다.
  하지만 리프레쉬를 할 때 마다 초기 i 값은 계속 1이 돌아 if문이 의미가 없어지게 되는 것이다.
  조건문을 걸게 되면 이부분이 생각대로 진행 되지 않기 때문에 php에서 python을 동작시키게 하는 것을
  빠르게 포기했다.
  
  
  
  
  ---------------------------------------
  
  
 
  4. 위와 같은 현상들로 센서값이 들어오는 속도가 느려지고 일관성이 떨어져서 보기가 안좋았다.




모듈을 조건에 따라 실행해야하는 문제 해결 방법은
1. 가장 처음으로 php에서 python에 코드를 바로 실행 시켜주는 것을 하면 안된다는 것을 알았다.
2. php에서 기능적으로 동작하는 것을 넣으면 안된다.
3. 그러면 어떻게 하나?
4. 파이썬에서 조건을 걸고 모듈을 동작 시켜주면 된다.
5. 파이썬 조건은 DB로 가져와서 걸 수 있다.
6. 이 조건들은 php에서 사용자가 원하는 값을 입력해 DB로 넣어주게 되는 것이다.
7. 이렇게 하면 php에서 기능적으로 동작하는 구문이 없어지고 
8. python에서 모듈을 동작하는 기능들을 처리하기 때문에 php와 python 간의 생기는 문제가 없어진다.
9. php에서 DB에 python이 원하는 조건을 입력해서 python은 계속 DB의 값을 읽어오며 조건문을 수행할 수 있을 것이다.

이렇게 생각 했고 실행에 옮길 예정이다.

dgj
